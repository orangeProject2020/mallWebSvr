(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{322:function(t,e,o){"use strict";o(81),o(82),o(17);var r=o(194),n=o.n(r);e.a={formatPrice:function(t){return(t/100).toFixed(2)},unLimitTreeLevel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=[],r=0,n=function t(e,r,n){for(var i=0;i<e.length;i++){var c=e[i];if(c.pid==r){c.level=n,c.html="";for(var d=0;d<n;d++)c.html+=" -- ";o.push(c),t(e,c.id,n+1)}}};return n(t,e,r),o},getTimestamp:function(t){var e=new Date(t);return parseInt(e.getTime()/1e3)},dateFormat:function(t,e){e=e||"YYYY-MM-DD HH:mm";var o=null;return o=t?new Date(1e3*t):new Date,n()(o).format(e)},dateDisplay:function(t){var e=parseInt(Date.now()/1e3)-t;if(e<60)return e+"秒前";if(e>=60&&e<3600)return parseInt(e/60).toString()+"分钟前";if(e>=3600&&e<86400)return parseInt(e/3600).toString()+"小时前";if(e>=86400&&e<2592e3)return parseInt(e/3600/24).toString()+"天前";var o=new Date(1e3*t);return n()(o).format("YYYY-MM-DD HH:mm")},monthPlus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[31,28,31,30,31,30,31,31,30,31,30,31],n=parseInt(this.dateFormat(t,"YYYY")),c=parseInt(this.dateFormat(t,"MM")),d=parseInt(this.dateFormat(t,"DD"));r[1]=n%4==0&&n/100!=0||n%100==0&&n%400==0?29:28;var l=0,h=r[c-1]-d;l+=h;for(var i=0;i<e;i++){(c+=1)>12&&(c=1,n+=1),r[1]=n%4==0&&n/100!=0||n%100==0&&n%400==0?29:28;var j=r[c-1];i==e-1&&(j=j-d<0?j:d),console.log("for days:",j),l+=j}return o?(t=t||parseInt(Date.now()/1e3))+24*l*3600:l},checkPlatform:function(){return/android/i.test(navigator.userAgent)?"android":/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"ios":""},checkWeixin:function(){return!!/MicroMessenger/i.test(navigator.userAgent)}}},324:function(t,e,o){var map={"./af":195,"./af.js":195,"./ar":196,"./ar-dz":197,"./ar-dz.js":197,"./ar-kw":198,"./ar-kw.js":198,"./ar-ly":199,"./ar-ly.js":199,"./ar-ma":200,"./ar-ma.js":200,"./ar-sa":201,"./ar-sa.js":201,"./ar-tn":202,"./ar-tn.js":202,"./ar.js":196,"./az":203,"./az.js":203,"./be":204,"./be.js":204,"./bg":205,"./bg.js":205,"./bm":206,"./bm.js":206,"./bn":207,"./bn.js":207,"./bo":208,"./bo.js":208,"./br":209,"./br.js":209,"./bs":210,"./bs.js":210,"./ca":211,"./ca.js":211,"./cs":212,"./cs.js":212,"./cv":213,"./cv.js":213,"./cy":214,"./cy.js":214,"./da":215,"./da.js":215,"./de":216,"./de-at":217,"./de-at.js":217,"./de-ch":218,"./de-ch.js":218,"./de.js":216,"./dv":219,"./dv.js":219,"./el":220,"./el.js":220,"./en-SG":221,"./en-SG.js":221,"./en-au":222,"./en-au.js":222,"./en-ca":223,"./en-ca.js":223,"./en-gb":224,"./en-gb.js":224,"./en-ie":225,"./en-ie.js":225,"./en-il":226,"./en-il.js":226,"./en-nz":227,"./en-nz.js":227,"./eo":228,"./eo.js":228,"./es":229,"./es-do":230,"./es-do.js":230,"./es-us":231,"./es-us.js":231,"./es.js":229,"./et":232,"./et.js":232,"./eu":233,"./eu.js":233,"./fa":234,"./fa.js":234,"./fi":235,"./fi.js":235,"./fo":236,"./fo.js":236,"./fr":237,"./fr-ca":238,"./fr-ca.js":238,"./fr-ch":239,"./fr-ch.js":239,"./fr.js":237,"./fy":240,"./fy.js":240,"./ga":241,"./ga.js":241,"./gd":242,"./gd.js":242,"./gl":243,"./gl.js":243,"./gom-latn":244,"./gom-latn.js":244,"./gu":245,"./gu.js":245,"./he":246,"./he.js":246,"./hi":247,"./hi.js":247,"./hr":248,"./hr.js":248,"./hu":249,"./hu.js":249,"./hy-am":250,"./hy-am.js":250,"./id":251,"./id.js":251,"./is":252,"./is.js":252,"./it":253,"./it-ch":254,"./it-ch.js":254,"./it.js":253,"./ja":255,"./ja.js":255,"./jv":256,"./jv.js":256,"./ka":257,"./ka.js":257,"./kk":258,"./kk.js":258,"./km":259,"./km.js":259,"./kn":260,"./kn.js":260,"./ko":261,"./ko.js":261,"./ku":262,"./ku.js":262,"./ky":263,"./ky.js":263,"./lb":264,"./lb.js":264,"./lo":265,"./lo.js":265,"./lt":266,"./lt.js":266,"./lv":267,"./lv.js":267,"./me":268,"./me.js":268,"./mi":269,"./mi.js":269,"./mk":270,"./mk.js":270,"./ml":271,"./ml.js":271,"./mn":272,"./mn.js":272,"./mr":273,"./mr.js":273,"./ms":274,"./ms-my":275,"./ms-my.js":275,"./ms.js":274,"./mt":276,"./mt.js":276,"./my":277,"./my.js":277,"./nb":278,"./nb.js":278,"./ne":279,"./ne.js":279,"./nl":280,"./nl-be":281,"./nl-be.js":281,"./nl.js":280,"./nn":282,"./nn.js":282,"./pa-in":283,"./pa-in.js":283,"./pl":284,"./pl.js":284,"./pt":285,"./pt-br":286,"./pt-br.js":286,"./pt.js":285,"./ro":287,"./ro.js":287,"./ru":288,"./ru.js":288,"./sd":289,"./sd.js":289,"./se":290,"./se.js":290,"./si":291,"./si.js":291,"./sk":292,"./sk.js":292,"./sl":293,"./sl.js":293,"./sq":294,"./sq.js":294,"./sr":295,"./sr-cyrl":296,"./sr-cyrl.js":296,"./sr.js":295,"./ss":297,"./ss.js":297,"./sv":298,"./sv.js":298,"./sw":299,"./sw.js":299,"./ta":300,"./ta.js":300,"./te":301,"./te.js":301,"./tet":302,"./tet.js":302,"./tg":303,"./tg.js":303,"./th":304,"./th.js":304,"./tl-ph":305,"./tl-ph.js":305,"./tlh":306,"./tlh.js":306,"./tr":307,"./tr.js":307,"./tzl":308,"./tzl.js":308,"./tzm":309,"./tzm-latn":310,"./tzm-latn.js":310,"./tzm.js":309,"./ug-cn":311,"./ug-cn.js":311,"./uk":312,"./uk.js":312,"./ur":313,"./ur.js":313,"./uz":314,"./uz-latn":315,"./uz-latn.js":315,"./uz.js":314,"./vi":316,"./vi.js":316,"./x-pseudo":317,"./x-pseudo.js":317,"./yo":318,"./yo.js":318,"./zh-cn":319,"./zh-cn.js":319,"./zh-hk":320,"./zh-hk.js":320,"./zh-tw":321,"./zh-tw.js":321};function r(t){var e=n(t);return o(e)}function n(t){if(!o.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=n,t.exports=r,r.id=324},326:function(t,e,o){var content=o(332);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(31).default)("0d1fea3e",content,!0,{sourceMap:!1})},330:function(t){t.exports=JSON.parse('[{"id":1,"name":"","img":"https://c.static-nike.com/a/images/t_prod_ss/w_960,c_limit,f_auto/bjpnzolvihmfex4owny6/air-jordan-xxxiv-guo-ailun-release-date.jpg","url":"","type":""},{"id":2,"name":"","img":"https://c.static-nike.com/a/images/w_1536,c_limit,f_auto/v9kbee1dbxujihaxq0sj/air-force-1-clot-release-date.jpg","url":"","type":""}]')},331:function(t,e,o){"use strict";var r=o(326);o.n(r).a},332:function(t,e,o){(t.exports=o(30)(!1)).push([t.i,"body{background-color:#fafafa}.index-nav-bar{position:fixed;top:0;width:100%;background:none}.index-nav-bar:after{border-bottom-width:0}",""])},348:function(t,e,o){"use strict";o.r(e);o(80),o(38),o(27),o(17),o(63);var r=o(47),n=(o(64),o(28),o(119)),c=o(330);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var l={head:function(){return{title:"商品列表"}},fetch:function(t){var e,o;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=t.store,t.params,e.state.categorys.length){r.next=7;break}return r.next=4,regeneratorRuntime.awrap(n.a.post("/api/mall/goods/categorys",{status:1}));case 4:o=r.sent,console.log("/fetch categorysRet",o),0===o.code&&e.commit("categorysSet",o.data.rows);case 7:case"end":return r.stop()}}))},created:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("/created categoryActive:",this.$store.state.categoryActive),this.activeIndex=this.$store.state.categoryActive,console.log("/created categoryActive:",this.activeIndex),t.next=5,regeneratorRuntime.awrap(this.getGoodsList());case 5:case"end":return t.stop()}}),null,this)},mounted:function(){var t=this;console.log("/mounted ................."),document.addEventListener("UniAppJSBridgeReady",(function(){console.log("UniAppJSBridgeReady ................."),t.$store.commit("isAppSet",!0)}))},data:function(){return{listLoading:!1,listFinished:!1,listError:!1,banners:c,isLoading:!1,activeIndex:0,categoryIdActive:1,goodsData:{},goodsList:[]}},computed:{categorys:function(){var t=[];return this.$store.state.categorys.forEach((function(e){t.push({id:e.id,name:e.name,text:e.title})})),t}},methods:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(source,!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},o(322).a,{onRefresh:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.activeIndex=0,console.log("onRefresh start ..."),this.listFinished=!1,this.listLoading=!0,this.goodsData={},this.goodsList={},this.$store.commit("goodsDataSet",this.goodsData),t.prev=7,t.next=10,regeneratorRuntime.awrap(this.getGoodsList());case 10:this.$toast.success("刷新成功"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),this.$toast.fail("刷新失败，请稍后重试");case 16:this.isLoading=!1;case 17:case"end":return t.stop()}}),null,this,[[7,13]])},categoryIdActiveGet:function(){return console.log("categoryIdActiveGet.activeIndex ",this.activeIndex),this.categorys[this.activeIndex].id||0},categoryChoose:function(t){console.log(t),this.$store.commit("categoryActiveSet",t);var e=this.$store.state.categorys[t];console.log("categoryChoose ",e),this.activeIndex=t,this.listFinished=!1,this.listLoading=!0,this.getGoodsList()},getGoodsList:function(){var t,e,o,r,c=this;return regeneratorRuntime.async((function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("/getGoodsList start ..."),t=this.categoryIdActiveGet(),console.log("/getGoodsList categoryId:",t),this.goodsData["category_"+t]||(this.$store.state.goodsData["category_"+t]?this.goodsData["category_"+t]=this.$store.state.goodsData["category_"+t]:this.goodsData["category_"+t]={rows:[],count:0,page:0}),e=this.goodsData["category_"+t],console.log("/getGoodsList goodsData",e),o=e.page||1,2,d.next=10,regeneratorRuntime.awrap(n.a.post("/api/mall/goods/list",{category_id:t,page:o,limit:2,status:1}));case 10:r=d.sent,console.log("/getGoodsList goodsRet",r),0===r.code&&this.$store.commit("goodsDataSet",this.goodsData),0===r.data.rows.length?this.listFinished=!0:(this.goodsData["category_"+t].count=r.data.count,this.goodsData["category_"+t].page=o+1),r.data.rows.forEach((function(e){c.goodsData["category_"+t].rows.push(e)})),console.log("/getGoodsList goodsData ",t,this.goodsData["category_"+t]),this.goodsList=this.goodsData["category_"+t].rows,this.listLoading=!1;case 18:case"end":return d.stop()}}),null,this)},goToDetail:function(t){this.$router.push("/goods/detail?id="+t.id)},goCart:function(){this.$router.push("/cart")}})},h=(o(331),o(29)),component=Object(h.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("van-nav-bar",{staticClass:"index-nav-bar",attrs:{title:""},on:{"click-right":t.goCart}},[o("van-icon",{attrs:{slot:"right",name:"shopping-cart-o",size:"2rem"},slot:"right"})],1),t._v(" "),o("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[o("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"blue",height:200}},[t._l(t.banners,(function(t){return[o("van-swipe-item",[o("img",{staticStyle:{height:"200px",width:"100%"},attrs:{lazy:t.img,src:t.img}})])]}))],2),t._v(" "),o("div",{staticClass:"border-t"},[o("van-tree-select",{attrs:{height:"",items:t.categorys,"main-active-index":t.activeIndex},on:{"update:mainActiveIndex":function(e){t.activeIndex=e},"update:main-active-index":function(e){t.activeIndex=e},"click-nav":t.categoryChoose}},[o("template",{slot:"content"},[o("van-list",{attrs:{finished:t.listFinished,"finished-text":"没有更多了",error:t.listError,"error-text":"请求失败，点击重新加载","immediate-check":!1},on:{"update:error":function(e){t.listError=e},load:t.getGoodsList},model:{value:t.listLoading,callback:function(e){t.listLoading=e},expression:"listLoading"}},t._l(t.goodsList,(function(e){return o("van-cell",{key:e.id,staticStyle:{padding:"0"}},[o("van-card",{attrs:{tag:"new",price:(e.price/100).toFixed(2),desc:e.description,title:e.title,thumb:e.cover,"origin-price":(e.price_market/100).toFixed(2)},on:{click:function(o){return t.goToDetail(e)}}})],1)})),1)],1)],2)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);