exports.ids=[11],exports.modules={34:function(t,e,o){"use strict";var r=o(32),n=o.n(r);e.a={formatPrice:t=>(t/100).toFixed(2),unLimitTreeLevel(t,e=0){var o=[],r=function(t,e,n){for(var i=0;i<t.length;i++){var c=t[i];if(c.pid==e){c.level=n,c.html="";for(let t=0;t<n;t++)c.html+=" -- ";o.push(c),r(t,c.id,n+1)}}};return r(t,e,0),o},getTimestamp(t){let e=new Date(t);return parseInt(e.getTime()/1e3)},dateFormat(t,e){e=e||"YYYY-MM-DD HH:mm";let o=null;return o=t?new Date(1e3*t):new Date,n()(o).format(e)},dateDisplay(t){let e=parseInt(Date.now()/1e3)-t;if(e<60)return e+"秒前";if(e>=60&&e<3600)return parseInt(e/60).toString()+"分钟前";if(e>=3600&&e<86400)return parseInt(e/3600).toString()+"小时前";if(e>=86400&&e<2592e3)return parseInt(e/3600/24).toString()+"天前";{let e="YYYY-MM-DD HH:mm",o=new Date(1e3*t);return n()(o).format(e)}},monthPlus(t,e=1,o=!0){let r=[31,28,31,30,31,30,31,31,30,31,30,31],n=parseInt(this.dateFormat(t,"YYYY")),c=parseInt(this.dateFormat(t,"MM")),d=parseInt(this.dateFormat(t,"DD"));r[1]=n%4==0&&n/100!=0||n%100==0&&n%400==0?29:28;let l=0;l+=r[c-1]-d;for(let i=0;i<e;i++){(c+=1)>12&&(c=1,n+=1),r[1]=n%4==0&&n/100!=0||n%100==0&&n%400==0?29:28;let t=r[c-1];i==e-1&&(t=t-d<0?t:d),console.log("for days:",t),l+=t}return o?(t=t||parseInt(Date.now()/1e3))+24*l*3600:l},checkPlatform:()=>/android/i.test(navigator.userAgent)?"android":/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"ios":"",checkWeixin:()=>!!/MicroMessenger/i.test(navigator.userAgent)}},37:function(t,e,o){var content=o(41);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(4).default;t.exports.__inject__=function(t){r("0d1fea3e",content,!0,t)}},39:function(t){t.exports=JSON.parse('[{"id":1,"name":"","img":"https://c.static-nike.com/a/images/t_prod_ss/w_960,c_limit,f_auto/bjpnzolvihmfex4owny6/air-jordan-xxxiv-guo-ailun-release-date.jpg","url":"","type":""},{"id":2,"name":"","img":"https://c.static-nike.com/a/images/w_1536,c_limit,f_auto/v9kbee1dbxujihaxq0sj/air-force-1-clot-release-date.jpg","url":"","type":""}]')},40:function(t,e,o){"use strict";o.r(e);var r=o(37),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,(function(){return r[t]}))}(c);e.default=n.a},41:function(t,e,o){(t.exports=o(3)(!1)).push([t.i,"body{background-color:#fafafa}.index-nav-bar{position:fixed;top:0;width:100%;background:none}.index-nav-bar:after{border-bottom-width:0}",""])},49:function(t,e,o){"use strict";o.r(e);var r=o(16),n=o(39),c={head:()=>({title:"商品列表"}),async fetch({store:t,params:e}){if(!t.state.categorys.length){let e=await r.a.post("/api/mall/goods/categorys",{status:1});console.log("/fetch categorysRet",e),0===e.code&&t.commit("categorysSet",e.data.rows)}},async created(){console.log("/created categoryActive:",this.$store.state.categoryActive),this.activeIndex=this.$store.state.categoryActive,console.log("/created categoryActive:",this.activeIndex),await this.getGoodsList()},mounted(){console.log("/mounted ................."),document.addEventListener("UniAppJSBridgeReady",()=>{console.log("UniAppJSBridgeReady ................."),this.$store.commit("isAppSet",!0)})},data:()=>({listLoading:!1,listFinished:!1,listError:!1,banners:n,isLoading:!1,activeIndex:0,categoryIdActive:1,goodsData:{},goodsList:[]}),computed:{categorys(){let t=[];return this.$store.state.categorys.forEach(e=>{t.push({id:e.id,name:e.name,text:e.title})}),t}},methods:{...o(34).a,async onRefresh(){this.activeIndex=0,console.log("onRefresh start ..."),this.listFinished=!1,this.listLoading=!0,this.goodsData={},this.goodsList={},this.$store.commit("goodsDataSet",this.goodsData);try{await this.getGoodsList(),this.$toast.success("刷新成功")}catch(t){this.$toast.fail("刷新失败，请稍后重试")}this.isLoading=!1},categoryIdActiveGet(){return console.log("categoryIdActiveGet.activeIndex ",this.activeIndex),this.categorys[this.activeIndex].id||0},categoryChoose(t){console.log(t),this.$store.commit("categoryActiveSet",t);let e=this.$store.state.categorys[t];console.log("categoryChoose ",e),this.activeIndex=t,this.listFinished=!1,this.listLoading=!0,this.getGoodsList()},async getGoodsList(){console.log("/getGoodsList start ...");let t=this.categoryIdActiveGet();console.log("/getGoodsList categoryId:",t),this.goodsData["category_"+t]||(this.$store.state.goodsData["category_"+t]?this.goodsData["category_"+t]=this.$store.state.goodsData["category_"+t]:this.goodsData["category_"+t]={rows:[],count:0,page:0});let e=this.goodsData["category_"+t];console.log("/getGoodsList goodsData",e);let o=e.page||1,n=await r.a.post("/api/mall/goods/list",{category_id:t,page:o,limit:2,status:1});console.log("/getGoodsList goodsRet",n),0===n.code&&this.$store.commit("goodsDataSet",this.goodsData),0===n.data.rows.length?this.listFinished=!0:(this.goodsData["category_"+t].count=n.data.count,this.goodsData["category_"+t].page=o+1),n.data.rows.forEach(e=>{this.goodsData["category_"+t].rows.push(e)}),console.log("/getGoodsList goodsData ",t,this.goodsData["category_"+t]),this.goodsList=this.goodsData["category_"+t].rows,this.listLoading=!1},goToDetail(t){this.$router.push("/goods/detail?id="+t.id)},goCart(){this.$router.push("/cart")}}},d=o(2);var component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("van-nav-bar",{staticClass:"index-nav-bar",attrs:{title:""},on:{"click-right":t.goCart}},[o("van-icon",{attrs:{slot:"right",name:"shopping-cart-o",size:"2rem"},slot:"right"})],1),t._ssrNode(" "),o("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[o("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"blue",height:200}},[t._l(t.banners,(function(t){return[o("van-swipe-item",[o("img",{staticStyle:{height:"200px",width:"100%"},attrs:{lazy:t.img,src:t.img}})])]}))],2),t._v(" "),o("div",{staticClass:"border-t"},[o("van-tree-select",{attrs:{height:"",items:t.categorys,"main-active-index":t.activeIndex},on:{"update:mainActiveIndex":function(e){t.activeIndex=e},"update:main-active-index":function(e){t.activeIndex=e},"click-nav":t.categoryChoose}},[o("template",{slot:"content"},[o("van-list",{attrs:{finished:t.listFinished,"finished-text":"没有更多了",error:t.listError,"error-text":"请求失败，点击重新加载","immediate-check":!1},on:{"update:error":function(e){t.listError=e},load:t.getGoodsList},model:{value:t.listLoading,callback:function(e){t.listLoading=e},expression:"listLoading"}},t._l(t.goodsList,(function(e){return o("van-cell",{key:e.id,staticStyle:{padding:"0"}},[o("van-card",{attrs:{tag:"new",price:(e.price/100).toFixed(2),desc:e.description,title:e.title,thumb:e.cover,"origin-price":(e.price_market/100).toFixed(2)},on:{click:function(o){return t.goToDetail(e)}}})],1)})),1)],1)],2)],1)],1)],2)}),[],!1,(function(t){var e=o(40);e.__inject__&&e.__inject__(t)}),null,"3bb67622");e.default=component.exports}};